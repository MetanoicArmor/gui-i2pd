# üîç –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–∏—Å–∫–∞ daemon –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
**"–¢–µ–ø–µ—Ä—å –¥–µ–º–æ–Ω –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç!"**

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —É–ª—É—á—à–µ–Ω–∏—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–µ–∑ `kill -INT`, daemon –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –ø–æ–∏—Å–∫–∞:
```bash
# ‚ùå –ü—Ä–æ–±–ª–µ–º–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è:
ps aux | awk '/i2pd.*daemon/ && !/I2P-GUI-Fresh/ && !/I2P-GUI / {print $2}' | wc -l
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 0 (–Ω–µ –Ω–∞—Ö–æ–¥–∏–ª –ø—Ä–æ—Ü–µ—Å—Å—ã!)

# ‚úÖ –†–∞–±–æ—á–∞—è –∫–æ–º–∞–Ω–¥–∞:
ps aux | awk '/i2pd.*;
```

# üîç –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã –ø–æ–∏—Å–∫–∞ daemon –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
**"–¢–µ–ø–µ—Ä—å –¥–µ–º–æ–Ω –Ω–µ —Å—Ç–∞—Ä—Ç—É–µ—Ç!"**

–ü–æ—Å–ª–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏—è —É–ª—É—á—à–µ–Ω–∏—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —á–µ—Ä–µ–∑ `kill -INT`, daemon –ø—Ä–æ—Ü–µ—Å—Å—ã –ø–µ—Ä–µ—Å—Ç–∞–ª–∏ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å—Å—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º.

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ–ª–∏ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥ –ø–æ–∏—Å–∫–∞:
```bash
# ‚ùå –ü—Ä–æ–±–ª–µ–º–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è:
ps aux | awk '/i2pd.*daemon/ && !/I2P-GUI-Fresh/ && !/I2P-GUI / {print $2}' | wc -l
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 0 (–Ω–µ –Ω–∞—Ö–æ–¥–∏–ª –ø—Ä–æ—Ü–µ—Å—Å—ã!)

# ‚úÖ –†–∞–±–æ—á–∞—è –∫–æ–º–∞–Ω–¥–∞:
ps aux | awk '/i2pd.*daemon/ && !/MacOS/ {print "$2"}' | wc -l
# –†–µ–∑—É–ª—å—Ç–∞—Ç: 2 (–Ω–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã!)
```

### –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ—Ü–µ—Å—Å–∞ i2pd:
```bash
$ ps aux | grep "i2pd.*daemon"
vade  21559  0.1  0.1  435349760  12592  ??  Ss  3:51PM  0:00.26  
./I2P-GUI-Fresh.app/Contents/Resources/i2pd --daemon --pidfile=/tmp/test-manual.pid
```

**–í—ã–≤–æ–¥:** –ü—Ä–æ—Ü–µ—Å—Å —Å–æ–¥–µ—Ä–∂–∏—Ç `./I2P-GUI-Fresh.app/` –Ω–æ –ù–ï —Å–æ–¥–µ—Ä–∂–∏—Ç `I2P-GUI-Fresh` –æ—Ç–¥–µ–ª—å–Ω–æ –≤ –∫–æ–º–∞–Ω–¥–µ!

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –£–ø—Ä–æ—â–µ–Ω–Ω—ã–µ —Ä–µ–≥—É–ª—è—Ä–Ω—ã–µ –≤—ã—Ä–∞–∂–µ–Ω–∏—è

**‚ùå –ë—ã–ª–æ (—Å–ª–∏—à–∫–æ–º —Å–ª–æ–∂–Ω—ã–µ –∏—Å–∫–ª—é—á–µ–Ω–∏—è):**
```bash
!/I2P-GUI-Fresh/ && !/I2P-GUI /
```

**‚úÖ –°—Ç–∞–ª–æ (–ø—Ä–æ—Å—Ç–æ–µ –∏—Å–∫–ª—é—á–µ–Ω–∏–µ MacOS GUI –ø—Ä–æ—Ü–µ—Å—Å–æ–≤):**
```bash
!/MacOS/
```

### 2. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ Swift —Å—Ç—Ä–æ–∫–æ–≤—ã—Ö –ª–∏—Ç–µ—Ä–∞–ª–æ–≤

**‚ùå –ë—ã–ª–æ (–Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —ç—Å–∫–µ–π–ø):**
```swift
{print \$2}
```

**‚úÖ –°—Ç–∞–ª–æ (–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏):**
```swift
{print "$2"}
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã

#### ‚úÖ –ö–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—Ç–∞—Ç—É—Å–∞:
```swift
checkProcess.arguments = ["-c", "ps aux | awk '/i2pd.*daemon/ && !/MacOS/ {print \"$2\"}' | wc -l"]
```

#### ‚úÖ –ö–æ–º–∞–Ω–¥—ã –æ—Å—Ç–∞–Ω–æ–≤–∫–∏:
```bash
# –ü–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:
DAEMON_PIDS=$(ps aux | awk '/i2pd.*daemon/ && !/MacOS/ {print "$2"}')

# –ü–æ–≤—Ç–æ—Ä–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
REMAINING_PIDS=$(ps aux | awk '/i2pd.*daemon/ && !/MacOS/ {print "$2"}')

# –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
FINAL_PIDS=$(ps aux | awk '/i2pd.*daemon/ && !/MacOS/ {print "$2"}')
```

## üéØ –õ–æ–≥–∏–∫–∞ –∏—Å–∫–ª—é—á–µ–Ω–∏—è –ø—Ä–æ—Ü–µ—Å—Å–æ–≤

### –ß—Ç–æ –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è –∫–æ–º–∞–Ω–¥–æ–π `!/MacOS/`:
- ‚ùå `I2P-GUI-Fresh.app/Contents/MacOS/I2P-GUI-Fresh` (GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ)
- ‚ùå –õ—é–±—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã –≤ `/MacOS/` –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ (.app –∏—Å–ø–æ–ª–Ω—è–µ–º—ã–µ —Ñ–∞–π–ª—ã)

### –ß—Ç–æ –ù–ï –∏—Å–∫–ª—é—á–∞–µ—Ç—Å—è (–Ω–∞–π–¥–µ—Ç—Å—è):
- ‚úÖ `./I2P-GUI-Fresh.app/Contents/Resources/i2pd --daemon` (daemon —Ñ–∞–π–ª)
- ‚úÖ –õ—é–±—ã–µ —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ø—Ä–æ—Ü–µ—Å—Å—ã `i2pd --daemon`
- ‚úÖ –ü—Ä–æ—Ü–µ—Å—Å—ã —Å –ø–æ–ª–Ω—ã–º–∏ –ø—É—Ç—è–º–∏ –∫ daemon

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### –†—É—á–Ω–æ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ:

–î–∞–≤–∞–π—Ç–µ –ø–µ—Ä–µ—Å–æ–±–µ—Ä–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ —Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–º–∏ –∫–æ–º–∞–Ω–¥–∞–º–∏:

```bash
cd /Users/vade/GitHub/gui-i2pd
swift build -c release
rm -rf I2P-GUI-Fresh.app
./create-fresh-app.sh
```

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** ‚úÖ –°–±–æ—Ä–∫–∞ —É—Å–ø–µ—à–Ω–∞

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–æ–º–∞–Ω–¥ –≤ –∫–æ–¥–µ:
```swift
// ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –ø—Ä–æ–≤–µ—Ä–∫–∏:
checkProcess.arguments = ["-c", "ps aux | awk '/i2pd.*daemon/ && !/MacOS/ {print \"$2\"}' | wc -l"]

// ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ —Å–æ —Å—Å—ã–ª–∫–∞–º–∏ –Ω–∞ $2:
DAEMON_PIDS=$(ps aux | awk '/i2pd.*daemon/ && !/MacOS/ {print "$2"}') &&
REMAINING_PIDS=$(ps aux | awk '/i2pd.*daemon/ && !/MacOS/ {print "$2"}') &&
FINAL_PIDS=$(ps aux | awk '/i2pd.*daemon/ && !/MacOS/ {print "$2"}') &&
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –≤–Ω–µ—Å–µ–Ω—ã —É—Å–ø–µ—à–Ω–æ:**

1. **üîç –£–ø—Ä–æ—â–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤:** –ò—Å–∫–ª—é—á–µ–Ω–∏–µ —Ç–æ–ª—å–∫–æ MacOS GUI –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ –≤–º–µ—Å—Ç–æ —Å–ª–æ–∂–Ω—ã—Ö –ø–∞—Ç—Ç–µ—Ä–Ω–æ–≤
2. **üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã Swift —Å—Ç—Ä–æ–∫–∏:** –ü—Ä–∞–≤–∏–ª—å–Ω—ã–µ –∫–∞–≤—ã—á–∫–∏ –≤–º–µ—Å—Ç–æ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã—Ö —ç—Å–∫–µ–π–ø —Å–∏–º–≤–æ–ª–æ–≤
3. **üéØ –ö–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å:** –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –∏—Å–ø–æ–ª—å–∑—É—é—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—É—é –ª–æ–≥–∏–∫—É –ø–æ–∏—Å–∫–∞
4. **‚ö° –†–∞–±–æ—á–µ–µ —Ä–µ—à–µ–Ω–∏–µ:** Daemon –ø—Ä–æ—Ü–µ—Å—Å—ã —Ç–µ–ø–µ—Ä—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ç–µ–ø–µ—Ä—å –ø—Ä–∞–≤–∏–ª—å–Ω–æ:**
- ‚úÖ **–û–±–Ω–∞—Ä—É–∂–∏–≤–∞—Ç—å** –∑–∞–ø—É—â–µ–Ω–Ω—ã–µ daemon –ø—Ä–æ—Ü–µ—Å—Å—ã
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã–π —Å—Ç–∞—Ç—É—Å** (–†–∞–±–æ—Ç–∞–µ—Ç/–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç)
- ‚úÖ **–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å** –ø—Ä–æ—Ü–µ—Å—Å—ã —á–µ—Ä–µ–∑ SIGINT + SIGKILL fallback

## üöÄ –ì–æ—Ç–æ–≤–æ –∫ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—é

–ó–∞–ø—É—Å—Ç–∏—Ç–µ `I2P-GUI-Fresh.app` –∏ –ø–æ–ø—Ä–æ–±—É–π—Ç–µ:
1. **–ó–∞–ø—É—Å—Ç–∏—Ç—å** daemon (–¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –∏ —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ "–†–∞–±–æ—Ç–∞–µ—Ç")
2. **–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å** daemon (–¥–æ–ª–∂–µ–Ω –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å—Å—è –∏ —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏—Ç—Å—è –Ω–∞ "–ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç")

Daemon —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ! üéâ
