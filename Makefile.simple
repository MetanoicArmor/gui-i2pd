# –ü—Ä–æ—Å—Ç–æ–π Makefile –¥–ª—è —Å–±–æ—Ä–∫–∏ I2PD GUI

TARGET = i2pd-gui
SRCDIR = i2pd-gui
BUILDDIR = build

.PHONY: build clean run

build:
	@echo "üî® –°–±–æ—Ä–∫–∞ Swift –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."
	@mkdir -p $(BUILDDIR)
	@swiftc \
		-o $(BUILDDIR)/$(TARGET) \
		$(SRCDIR)/App.swift \
		$(SRCDIR)/contentView.swift \
		$(SRCDIR)/I2pdManager.swift \
		-framework SwiftUI \
		-framework Cocoa \
		-target arm64-apple-macos14.0
	@echo "‚úÖ –°–±–æ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞!"

clean:
	@echo "üßπ –û—á–∏—Å—Ç–∫–∞..."
	@rm -rf $(BUILDDIR)

run: build
	@echo "üöÄ –ó–∞–ø—É—Å–∫..."
	@$(BUILDDIR)/$(TARGET)

test:
	@echo "üß™ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏–Ω—Ç–∞–∫—Å–∏—Å–∞ Swift —Ñ–∞–π–ª–æ–≤..."
	@swiftc -parse $(SRCDIR)/*.swift
	@echo "‚úÖ –°–∏–Ω—Ç–∞–∫—Å–∏—Å –∫–æ—Ä—Ä–µ–∫—Ç–µ–Ω"

info:
	@echo "üìã –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –ø—Ä–æ–µ–∫—Ç–µ:"
	@echo "   –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ: GUI –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è I2P daemon"
	@echo "   Swift –≤–µ—Ä—Å–∏—è: $(shell swift --version | head -1)"
	@echo ""
	@echo "üí° –ö–æ–º–∞–Ω–¥—ã:"
	@echo "   make build  - –°–æ–±—Ä–∞—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ"
	@echo "   make clean  - –û—á–∏—Å—Ç–∏—Ç—å —Å–±–æ—Ä–∫—É"
	@echo "   make run    - –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å"
	@echo "   make test   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–∏–Ω—Ç–∞–∫—Å–∏—Å"
