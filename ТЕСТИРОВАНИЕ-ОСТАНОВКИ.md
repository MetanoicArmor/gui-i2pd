# üõë –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –ª–æ–≥–∏–∫–∏ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ daemon

## üîç –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è `.app` –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Å–æ–æ–±—â–∏–ª: **"–ø–æ –ø—Ä–µ–∂–Ω–µ–º—É –Ω–µ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç, —á–µ—Ä–µ–∑ app"**

## üéØ –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã
–ö–æ–º–∞–Ω–¥—ã `pgrep -x i2pd` –Ω–µ —Ä–∞–±–æ—Ç–∞–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –¥–ª—è –ø–æ–∏—Å–∫–∞ daemon –ø—Ä–æ—Ü–µ—Å—Å–æ–≤, –∑–∞–ø—É—â–µ–Ω–Ω—ã—Ö –∫–∞–∫:
```
i2pd --daemon
```

## ‚ö° –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. –ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –ø–æ–∏—Å–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
```bash
# –°—Ç–∞—Ä–∞—è (–Ω–µ—Ä–∞–±–æ—Ç–∞—é—â–∞—è):
pgrep -x i2pd

# –ù–æ–≤–∞—è (—Ä–∞–±–æ—á–∞—è):
ps aux | awk '/i2pd.*daemon/ && !/I2P-GUI/ {print $2}'
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞:**
- ‚úÖ –¢–æ—á–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç –ø—Ä–æ—Ü–µ—Å—Å—ã `i2pd --daemon`
- ‚úÖ –ò—Å–∫–ª—é—á–∞–µ—Ç GUI –ø—Ä–æ—Ü–µ—Å—Å (`I2P-GUI`)
- ‚úÖ –ù–∞–¥–µ–∂–Ω–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ macOS

### 2. –£–ª—É—á—à–µ–Ω–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
```bash
DAEMON_PIDS=$(ps aux | awk '/i2pd.*daemon/ && !/I2P-GUI/ {print $2}') &&
if [ -n "$DAEMON_PIDS" ]; then
    for PID in $DAEMON_PIDS; do
        kill -TERM $PID && sleep 1
    done &&
    sleep 2 &&
    # –ü—Ä–æ–≤–µ—Ä–∫–∞ + SIGKILL –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
    REMAINING_PIDS=$(ps aux | awk '/i2pd.*daemon/ && !/I2P-GUI/ {print $2}') &&
    if [ -n "$REMAINING_PIDS" ]; then
        for PID in $REMAINING_PIDS; do
            kill -KILL $PID
        done
    fi
fi
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –†—É—á–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –∫–æ–º–∞–Ω–¥—ã:
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ daemon
ps aux | awk '/i2pd.*daemon/ && !/I2P-GUI/ {print $2}'

# –°–æ–∑–¥–∞–Ω–∏–µ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ –ø—Ä–æ—Ü–µ—Å—Å–∞
sleep 3600 &
TEST_PID=$!

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ (–∑–∞–º–µ–Ω–∏—Ç–µ sleep –Ω–∞ i2pd –¥–ª—è —Ä–µ–∞–ª—å–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è)
kill -TERM $TEST_PID
```

### –¢–µ—Å—Ç —á–µ—Ä–µ–∑ —Å–∫—Ä–∏–ø—Ç:
```bash
./test-stop.sh
```

### –†–µ–∞–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ—Ä–µ–∑ app:
1. **–ó–∞–ø—É—Å—Ç–∏—Ç–µ:** `open I2P-GUI.app`
2. **–ù–∞–∂–º–∏—Ç–µ "–ó–∞–ø—É—Å—Ç–∏—Ç—å"** - daemon –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å—Ç–∏—Ç—å—Å—è
3. **–ù–∞–∂–º–∏—Ç–µ "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å"** - –¥–æ–ª–∂–Ω—ã –ø–æ—è–≤–∏—Ç—å—Å—è –ª–æ–≥–∏:
   ```
   üîç –û—Å—Ç–∞–Ω–æ–≤–∫–∞ i2pd daemon...
   üìç –ù–∞–π–¥–µ–Ω—ã –ø—Ä–æ—Ü–µ—Å—Å—ã i2pd daemon: [PID]
   üõë –û—Ç–ø—Ä–∞–≤–ª—è–µ–º SIGTERM –ø—Ä–æ—Ü–µ—Å—Å—É [PID]...
   ‚úÖ i2pd daemon –ø–æ–ª–Ω–æ—Å—Ç—å—é –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω
   ```
4. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:** –°—Ç–∞—Ç—É—Å –¥–æ–ª–∂–µ–Ω –∏–∑–º–µ–Ω–∏—Ç—å—Å—è –Ω–∞ "–û—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω"

## ‚úÖ –ö–æ–º–∞–Ω–¥—ã –¥–ª—è —Ä—É—á–Ω–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏

```bash
# –ù–∞–π—Ç–∏ –≤—Å–µ –ø—Ä–æ—Ü–µ—Å—Å—ã i2pd
ps aux | grep i2pd

# –ù–∞–π—Ç–∏ —Ç–æ–ª—å–∫–æ daemon –ø—Ä–æ—Ü–µ—Å—Å—ã (–∏—Å–∫–ª—é—á–∞—è GUI)
ps aux | awk '/i2pd.*daemon/ && !/I2P-GUI/'

# –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ daemon –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | awk '/i2pd.*daemon/ && !/I2P-GUI/ {print $2}' | wc -l

# –ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–∞—è –æ—Å—Ç–∞–Ω–æ–≤–∫–∞ –≤—Å–µ—Ö daemon –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
ps aux | awk '/i2pd.*daemon/ && !/I2P-GUI/ {print $2}' | xargs kill -TERM
```

## üì± –û–±–Ω–æ–≤–ª–µ–Ω–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ

**–§–∞–π–ª:** `I2P-GUI.app`
- üîß **–ù–æ–≤–∞—è –ª–æ–≥–∏–∫–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏** —á–µ—Ä–µ–∑ `ps aux` –∏ `awk`
- üéØ **–¢–æ—á–Ω—ã–π –ø–æ–∏—Å–∫** —Ç–æ–ª—å–∫–æ daemon –ø—Ä–æ—Ü–µ—Å—Å–æ–≤
- üìù **–î–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏** –∫–∞–∂–¥–æ–≥–æ —à–∞–≥–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚ö° **–ù–∞–¥–µ–∂–Ω–∞—è —Ä–∞–±–æ—Ç–∞** –Ω–∞ macOS

## üöÄ –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–ü–æ—Å–ª–µ —ç—Ç–∏—Ö –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–æ–ª–∂–Ω–æ:
- ‚úÖ **–ö–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Ö–æ–¥–∏—Ç—å** daemon –ø—Ä–æ—Ü–µ—Å—Å—ã
- ‚úÖ **–ú—è–≥–∫–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å** —á–µ—Ä–µ–∑ `SIGTERM`
- ‚úÖ **–ü—Ä–∏–Ω—É–¥–∏—Ç–µ–ª—å–Ω–æ –æ—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞—Ç—å** —á–µ—Ä–µ–∑ `SIGKILL` –µ—Å–ª–∏ –Ω—É–∂–Ω–æ
- ‚úÖ **–ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –¥–µ—Ç–∞–ª—å–Ω—ã–µ –ª–æ–≥–∏** –ø—Ä–æ—Ü–µ—Å—Å–∞ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏
- ‚úÖ **–û–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç—É—Å** –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –≥–æ—Ç–æ–≤–æ –∫ –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–º—É –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é!** üéâ
