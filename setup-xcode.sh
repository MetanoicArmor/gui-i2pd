#!/bin/bash

echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Xcode"
echo "================================"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ –≤ –∏—Å—Ö–æ–¥–Ω–æ–º –º–µ—Å—Ç–µ
if [ -f "i2pd" ]; then
    echo "‚úÖ –ù–∞–π–¥–µ–Ω –∏—Å—Ö–æ–¥–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫ i2pd"
    echo "üìä –†–∞–∑–º–µ—Ä: $(ls -lh i2pd | awk '{print $5}')"
    
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é Xcode –ø—Ä–æ–µ–∫—Ç–∞
    if [ -d "i2pd-gui.xcodeproj" ]; then
        echo "üìÅ –ù–∞–π–¥–µ–Ω –ø—Ä–æ–µ–∫—Ç Xcode"
        echo "üîß –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å Xcode..."
        
        # –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –¥–æ—Å—Ç—É–ø–Ω—ã–µ –≤–∞—Ä–∏–∞–Ω—Ç—ã –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏—è
        echo ""
        echo "–í—ã–±–µ—Ä–∏—Ç–µ –≤–∞—Ä–∏–∞–Ω—Ç –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏:"
        echo "1 - –ö–æ–ø–∏—Ä–æ–≤–∞—Ç—å –±–∏–Ω–∞—Ä–Ω–∏–∫ –≤ –ø–∞–ø–∫—É –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)"
        echo "2 - –û—Å—Ç–∞–≤–∏—Ç—å –∫–∞–∫ –µ—Å—Ç—å (—Å–æ–∑–¥–∞–≤–∞—Ç—å —Å–∏–º–ª–∏–Ω–∫–∏)"
        echo "3 - –ü–æ–∫–∞–∑–∞—Ç—å —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ"
        
        read -p "–í–≤–µ–¥–∏—Ç–µ –Ω–æ–º–µ—Ä (1-3): " choice
        
        case $choice in
            1)
                echo "üì¶ –ö–æ–ø–∏—Ä—É–µ–º –±–∏–Ω–∞–Ω–∫ –≤ –ø–∞–ø–∫—É –ø—Ä–æ–µ–∫—Ç–∞..."
                cp i2pd i2pd-gui/
                echo "‚úÖ –ë–∏–Ω–∞—Ä–Ω–∏–∫ —Å–∫–æ–ø–∏—Ä–æ–≤–∞–Ω –≤ i2pd-gui/i2pd"
                echo "üí° –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ –∑–∞–ø—É—Å–∫–∞—Ç—å –≤ Xcode"
                ;;
            2)
                echo "üîó –°–æ–∑–¥–∞–µ–º —Å–∏–º–ª–∏–Ω–∫–∏..."
                ln -sf "$(pwd)/i2pd" i2pd-gui/i2pd 2>/dev/null || cp i2pd i2pd-gui/
                echo "‚úÖ –°–∏–º–ª–∏–Ω–∫ —Å–æ–∑–¥–∞–Ω"
                ;;
            3)
                echo "üìã –¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:"
                echo "   –û—Å–Ω–æ–≤–Ω–æ–π –±–∏–Ω–∞—Ä–Ω–∏–∫: $(ls -la i2pd 2>/dev/null || echo "–Ω–µ –Ω–∞–π–¥–µ–Ω")"
                echo "   –ë–∏–Ω–∞—Ä–Ω–∏–∫ –≤ –ø—Ä–æ–µ–∫—Ç–µ: $(ls -la i2pd-gui/i2pd 2>/dev/null || echo "–Ω–µ –Ω–∞–π–¥–µ–Ω")"
                ;;
            *)
                echo "‚ùå –ù–µ–≤–µ—Ä–Ω—ã–π –≤—ã–±–æ—Ä"
                ;;
        esac
    else
        echo "‚ùå –ü—Ä–æ–µ–∫—Ç Xcode –Ω–µ –Ω–∞–π–¥–µ–Ω"
        echo "üí° –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª i2pd-gui.xcodeproj —Å—É—â–µ—Å—Ç–≤—É–µ—Ç"
    fi
else
    echo "‚ùå –ë–∏–Ω–∞—Ä–Ω–∏–∫ i2pd –Ω–µ –Ω–∞–π–¥–µ–Ω –≤ —Ç–µ–∫—É—â–µ–π –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏"
    echo "üí° –ü–æ–º–µ—Å—Ç–∏—Ç–µ –±–∏–Ω–∞—Ä–Ω–∏–∫ i2pd –≤ –∫–æ—Ä–µ–Ω—å –ø—Ä–æ–µ–∫—Ç–∞"
fi

echo ""
echo "üöÄ –ì–æ—Ç–æ–≤–æ! –¢–µ–ø–µ—Ä—å –º–æ–∂–Ω–æ:"
echo "   open i2pd-gui.xcodeproj"
echo "   swift run"
