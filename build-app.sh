#!/bin/bash

echo "üî® –°–±–æ—Ä–∫–∞ I2PD GUI –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è"
echo "================================"

# –ü—Ä–æ–≤–µ—Ä—è–µ–º –Ω–∞–ª–∏—á–∏–µ Swift
if ! command -v swiftc &> /dev/null; then
    echo "‚ùå Swift –∫–æ–º–ø–∏–ª—è—Ç–æ—Ä –Ω–µ –Ω–∞–π–¥–µ–Ω"
    exit 1
fi

echo "üì¶ –ö–æ–º–ø–∏–ª—è—Ü–∏—è –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è..."

# –ö–æ–º–ø–∏–ª–∏—Ä—É–µ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
swiftc \
    -o i2pd-gui-app \
    i2pd-gui-main.swift \
    -framework Cocoa \
    -framework SwiftUI \
    -target arm64-apple-macos14.0

if [ $? -eq 0 ]; then
    echo "‚úÖ –ö–æ–º–ø–∏–ª—è—Ü–∏—è —É—Å–ø–µ—à–Ω–∞!"
    echo "üìÅ –ò—Å–ø–æ–ª–Ω—è–µ–º—ã–π —Ñ–∞–π–ª: i2pd-gui-app"
    echo ""
    echo "üöÄ –î–ª—è –∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:"
    echo "   ./i2pd-gui-app"
    echo ""
    echo "üìã –§—É–Ω–∫—Ü–∏–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è:"
    echo "   ‚Ä¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ I2P daemon"
    echo "   ‚Ä¢ –ü—Ä–æ—Å–º–æ—Ç—Ä —Å—Ç–∞—Ç—É—Å–∞ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏"
    echo "   ‚Ä¢ –°–∏—Å—Ç–µ–º–∞ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è"
    echo "   ‚Ä¢ –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π macOS –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å"
else
    echo "‚ùå –û—à–∏–±–∫–∞ –∫–æ–º–ø–∏–ª—è—Ü–∏–∏"
    exit 1
fi
