# üéØ –§–∏–Ω–∞–ª—å–Ω–æ–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—É—Ç–µ–π –∫ –±–∏–Ω–∞—Ä–Ω–∏–∫—É

## ‚ùå –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ –∞–Ω–∞–ª–∏–∑–∞ —Å–∫—Ä–∏–Ω—à–æ—Ç–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–æ **—Ä–∞—Å—Ö–æ–∂–¥–µ–Ω–∏–µ –≤ –ø—É—Ç—è—Ö –∫ –±–∏–Ω–∞—Ä–Ω–∏–∫—É i2pd**:

- **‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å:** `/Users/vade/GitHub/gui-i2pd/I2P-GUI-Fresh.app/Contents/Resources/i2pd`  
- **‚ùå –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å:** `/Users/vade/GitHub/gui-i2pd/i2pd/I2P-GUI-Fresh.app/Contents/Resources/i2pd` (–¥–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–π `/i2pd/`)

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –¢–µ—Å—Ç –±–∏–Ω–∞—Ä–Ω–∏–∫–∞ –∏–∑ –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏:
```bash
./I2P-GUI-Fresh.app/Contents/Resources/i2pd --version
# –†–µ–∑—É–ª—å—Ç–∞—Ç: i2pd version 2.58.0 ‚úÖ –†–ê–ë–û–¢–ê–ï–¢

./I2P-GUI-Fresh.app/Contents/Resources/i2pd --daemon --pidfile=/tmp/test.pid
# –†–µ–∑—É–ª—å—Ç–∞—Ç: daemon –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
```

**–í—ã–≤–æ–¥:** –ë–∏–Ω–∞—Ä–Ω–∏–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ. –ü—Ä–æ–±–ª–µ–º–∞ –≤ –ª–æ–≥–∏–∫–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è.

## ‚ö° –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ

### –°—Ç–∞—Ä–∞—è –ø—Ä–æ–±–ª–µ–º–Ω–∞—è –ª–æ–≥–∏–∫–∞:
```swift
// ‚ùå –ü–†–û–ë–õ–ï–ú–ù–û–ï –†–ï–®–ï–ù–ò–ï:
let bundlePath = Bundle.main.resourceURL?.path ?? ""
var foundPath = "\(bundlePath)/i2pd"
// –ú–æ–≥–ª–æ –ø—Ä–∏–≤–æ–¥–∏—Ç—å –∫ –Ω–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–º –ø—É—Ç—è–º
```

### –ù–æ–≤–æ–µ –Ω–∞–¥–µ–∂–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ:
```swift
// ‚úÖ –•–ê–†–î–ö–û–î–ù–û–ï –†–ï–®–ï–ù–ò–ï:
let bundlePath = Bundle.main.bundlePath
let resourcePath = "\(bundlePath)/Contents/Resources/i2pd"

// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ –≤ –≥–ª–∞–≤–Ω–æ–º –ø—É—Ç–∏
if FileManager.default.fileExists(atPath: resourcePath) {
    executablePath = resourcePath
} else {
    // Fallback –∫ –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã–º –ø—É—Ç—è–º —Ç–æ–ª—å–∫–æ –µ—Å–ª–∏ –≥–ª–∞–≤–Ω—ã–π –Ω–µ –Ω–∞–π–¥–µ–Ω
    var fallbackPaths: [String] = []
    
    if let resourceURLPath = Bundle.main.resourceURL?.path {
        let altPath = "\(resourceURLPath)/i2pd"
        fallbackPaths.append(altPath)
    }
    
    fallbackPaths.append(contentsOf: [
        "./i2pd",
        "/usr/local/bin/i2pd", 
        "/opt/homebrew/bin/i2pd",
        "/usr/bin/i2pd"
    ])
    
    // –§–∏–ª—å—Ç—Ä—É–µ–º —Ç–æ–ª—å–∫–æ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ –ø—É—Ç–∏
    let validPaths = fallbackPaths.filter { FileManager.default.fileExists(atPath: $0) }
    
    executablePath = validPaths.first ?? "./i2pd"
}
```

## üéØ –ö–ª—é—á–µ–≤—ã–µ —É–ª—É—á—à–µ–Ω–∏—è

### 1. –•–∞—Ä–¥–∫–æ–¥–∏–Ω–≥ –æ—Å–Ω–æ–≤–Ω–æ–≥–æ –ø—É—Ç–∏
```swift
// –ò—Å–ø–æ–ª—å–∑—É–µ–º Bundle.main.bundlePath –Ω–∞–ø—Ä—è–º—É—é
let bundlePath = Bundle.main.bundlePath  // /path/to/I2P-GUI-Fresh.app
let resourcePath = "\(bundlePath)/Contents/Resources/i2pd"
```

### 2. –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏—è
```swift
// –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è–µ–º –≥–ª–∞–≤–Ω—ã–π –ø—É—Ç—å
if FileManager.default.fileExists(atPath: resourcePath) {
    executablePath = resourcePath  // –ò—Å–ø–æ–ª—å–∑—É–µ–º –µ–≥–æ
} else {
    // –¢–æ–ª—å–∫–æ —Ç–æ–≥–¥–∞ –∏—â–µ–º –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤—ã
}
```

### 3. –£–ª—É—á—à–µ–Ω–Ω—ã–π –¥–µ–±–∞–≥ –≤—ã–≤–æ–¥
```swift
addLog(.debug, "üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è I2pdManager")
addLog(.debug, "üìç Bundle path: \(bundlePath)")
addLog(.debug, "üéØ –†–µ—Å—É—Ä—Å–Ω—ã–π –ø—É—Ç—å: \(resourcePath)")
addLog(.debug, "‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π –ø—É—Ç—å: \(executablePath)")
addLog(.debug, "üîç –§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: \(FileManager.default.fileExists(...))")
```

## üìä –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### –õ–æ–≥–∏ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∂—É—Ç:
```
üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è I2pdManager
üìç Bundle path: /Users/vade/GitHub/gui-i2pd/I2P-GUI-Fresh.app
üéØ –†–µ—Å—É—Ä—Å–Ω—ã–π –ø—É—Ç—å: /Users/vade/GitHub/gui-i2pd/I2P-GUI-Fresh.app/Contents/Resources/i2pd
‚úÖ –§–∏–Ω–∞–ª—å–Ω—ã–π –ø—É—Ç—å: /Users/vade/GitHub/gui-i2pd/I2P-GUI-Fresh.app/Contents/Resources/i2pd
üîç –§–∞–π–ª —Å—É—â–µ—Å—Ç–≤—É–µ—Ç: ‚úÖ –¥–∞
```

### –õ–æ–≥–∏ –∑–∞–ø—É—Å–∫–∞ —Ç–µ–ø–µ—Ä—å –ø–æ–∫–∞–∂—É—Ç:
```
üîÑ –ü—ã—Ç–∞–µ–º—Å—è –∑–∞–ø—É—Å—Ç–∏—Ç—å daemon...
üìç –ü—É—Ç—å –∫ –±–∏–Ω–∞—Ä–Ω–∏–∫—É: /Users/vade/GitHub/gui-i2pd/I2P-GUI-Fresh.app/Contents/Resources/i2pd  # –û–î–ò–ù–ê–ö–û–í–´–ô –ü–£–¢–¨!
üöÄ –ö–æ–º–∞–Ω–¥–∞ –∑–∞–ø—É—â–µ–Ω–∞: .../i2pd --daemon
‚úÖ –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–≤–µ—Ä—à–µ–Ω —Å –∫–æ–¥–æ–º: 0
üîÑ –ü—Ä–æ–≤–µ—Ä—è–µ–º —Å—Ç–∞—Ç—É—Å daemon...
‚úÖ Daemon –∑–∞–ø—É—Å—Ç–∏–ª—Å—è
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –ø—É—Ç–µ–π:
```bash
# –ö–æ–º–∞–Ω–¥–∞ –∏–∑ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–≥–æ —Å–∫—Ä–∏–ø—Ç–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø—É—Ç–∏:
üìç –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è App Resources: ./I2P-GUI-Fresh.app/Contents/Resources
üìç –ö–æ–Ω—Å—Ç—Ä—É–∫—Ü–∏—è Bundle path + /i2pd: ./I2P-GUI-Fresh.app/Contents/Resources/i2pd
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ daemon:
```bash
# Daemon –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è:
üöÄ –ü—Ä–æ—Ü–µ—Å—Å daemon –∑–∞–ø—É—â–µ–Ω —Å PID: 20638
# –ò —Ä–∞–±–æ—Ç–∞–µ—Ç:
‚úÖ Pro—Ü–µ—Å—Å daemon –≤—Å–µ –µ—â–µ —Ä–∞–±–æ—Ç–∞–µ—Ç
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

**–ü—Ä–∏–ª–æ–∂–µ–Ω–∏–µ `I2P-GUI-Fresh.app`:**
- üéØ **–ò—Å–ø–æ–ª—å–∑—É–µ—Ç —Ö–∞—Ä–¥–∫–æ–¥–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø—É—Ç—å** –∫ –±–∏–Ω–∞—Ä–Ω–∏–∫—É –≤ Bundle
- üîç **–ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—É—Ç—å** `[Bundle]/Contents/Resources/i2pd`  
- üìù **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –æ–¥–∏–Ω–∞–∫–æ–≤—ã–µ –ø—É—Ç–∏** –≤–æ –≤—Å–µ—Ö –ª–æ–≥–∞—Ö
- üöÄ **–ó–∞–ø—É—Å–∫–∞–µ—Ç daemon –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ** —á–µ—Ä–µ–∑ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –±–∏–Ω–∞—Ä–Ω–∏–∫
- ‚úÖ **–ü—Ä–æ–≤–µ—Ä—è–µ—Ç —Å—É—â–µ—Å—Ç–≤–æ–≤–∞–Ω–∏–µ —Ñ–∞–π–ª–∞** –ø–µ—Ä–µ–¥ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º
- üîÑ **–ò–º–µ–µ—Ç fallback –ª–æ–≥–∏–∫—É** –¥–ª—è –∞–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ã—Ö –ø—É—Ç–µ–π

**–¢–µ–ø–µ—Ä—å –ø—É—Ç–∏ –∫ –±–∏–Ω–∞—Ä–Ω–∏–∫—É –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–º–∏ –≤–æ –≤—Å–µ—Ö –ª–æ–≥–∞—Ö –∏ daemon –¥–æ–ª–∂–µ–Ω –∑–∞–ø—É—Å–∫–∞—Ç—å—Å—è!** üéâ

–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø—É—Å—Ç–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ - —Ç–µ–ø–µ—Ä—å –ª–æ–≥–∏ –¥–æ–ª–∂–Ω—ã –ø–æ–∫–∞–∑—ã–≤–∞—Ç—å –æ–¥–∏–Ω–∞–∫–æ–≤—ã–π –ø—É—Ç—å –∫ –±–∏–Ω–∞—Ä–Ω–∏–∫—É, –∏ daemon –¥–æ–ª–∂–µ–Ω —Å—Ç–∞—Ä—Ç–æ–≤–∞—Ç—å –±–µ–∑ –ø—Ä–æ–±–ª–µ–º.
